import{l as E}from"./DaKztfBH.js";import{r as g,U as R,d as L,o as V,g as _,t as k,L as A,A as r,z as i,S as C,v as P,N as D,O as z,B as x,y as B,T as O,m as U}from"./BvuxK_1C.js";function M(n){if("id"in n)return n.id;throw new Error("Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`")}function W(n,{selectedResources:b=[],allResourcesSelected:v=!1,resourceIDResolver:o=M,resourceFilter:l=void 0}={selectedResources:[],allResourcesSelected:!1,resourceIDResolver:M,resourceFilter:void 0}){const e=g(b),d=g(v);return{selectedResources:e,allResourcesSelected:d,handleSelectionChange:(f,s,t,c)=>{switch(f===R.All?d.value=s:d.value&&(d.value=!1),f){case R.Single:e.value=s?[...e.value,t]:e.value.filter(u=>u!==t);break;case R.All:case R.Page:if(l){const u=n.filter(l);e.value=s&&e.value.length<u.length?u.map(o):[]}else e.value=s?n.map(o):[];break;case R.Multi:if(!t)break;e.value=(()=>{const u=[],p=l?n.filter(l):n;for(let a=t[0];a<=t[1];a++)if(p.includes(n[a])){const m=o(n[a]);(s&&!e.value.includes(m)||!s&&e.value.includes(m))&&u.push(m)}return s?[...e.value,...u]:e.value.filter(a=>!u.includes(a))})();break;case R.Range:if(!t)break;e.value=(()=>{const a=(l?n.filter(l):n).map(o).slice(Number(t[0]),Number(t[1])+1),m=a.some(h=>e.value.includes(h));return!a.every(h=>e.value.includes(h))&&(s||m)?[...new Set([...e.value,...a]).values()]:e.value.filter(h=>!a.includes(h))})();break}},clearSelection:()=>{e.value=[],d.value=!1},removeSelectedResources:f=>{const t=[...e.value].filter(c=>!f.includes(c));e.value=t,t.length===0&&(d.value=!1)}}}const G=L({__name:"index-original",setup(n){const b={singular:"collection",plural:"collections"},v=g([]),o=g(0),l=g(50),e=g(0),{selectedResources:d,allResourcesSelected:$,handleSelectionChange:y}=W(v.value),I=t=>{U(`/collection/${t}/vm`)},f=async t=>{try{let c=await $fetch("http://localhost:3000/api/collections",{params:{skip:t,count:l.value}});v.value=c.data,o.value=t,l.value=l.value}catch(c){console.error("Error fetching data:",c)}},s=async()=>{try{let t=await $fetch("http://localhost:3000/api/collections",{params:{skip:o.value,count:l.value}});v.value=t.data,e.value=t.count}catch(t){console.error("Error fetching data:",t)}};return V(async()=>{await s()}),(t,c)=>{const u=_("Text"),p=_("IndexTableCell"),a=_("Button"),m=_("IndexTableRow"),T=_("IndexTable"),w=_("LegacyCard");return k(),A(C(O),{i18n:C(E)},{default:r(()=>[i(w,null,{default:r(()=>[i(T,{resourceName:b,itemCount:v.value.length,selectable:!1,onSelectionChange:C(y),headings:[{title:"S.No"},{title:"Collection"},{title:"Action"},{title:"Sort"}],pagination:{hasPrevious:o.value>0,hasNext:o.value+l.value<e.value,onNext:()=>{f(o.value+l.value)},onPrevious:()=>{f(o.value-l.value)}}},{default:r(()=>[(k(!0),P(D,null,z(v.value,({id:S,title:h},N)=>(k(),A(m,{id:S,key:S,position:N,selected:C(d).includes(S)},{default:r(()=>[i(p,null,{default:r(()=>[i(u,{variant:"bodyMd",fontWeight:"bold",as:"span"},{default:r(()=>[x(B(N+o.value+1),1)]),_:2},1024)]),_:2},1024),i(p,null,{default:r(()=>[x(B(h),1)]),_:2},1024),i(p,null,{default:r(()=>[i(a,{onClick:Y=>I(S)},{default:r(()=>c[0]||(c[0]=[x("Visual Merchandising")])),_:2},1032,["onClick"])]),_:2},1024),i(p,null,{default:r(()=>[i(a,null,{default:r(()=>c[1]||(c[1]=[x("Sync")])),_:1})]),_:1})]),_:2},1032,["id","position","selected"]))),128))]),_:1},8,["itemCount","onSelectionChange","pagination"])]),_:1})]),_:1},8,["i18n"])}}});export{G as default};
