import{_ as te}from"./CJ-M-fe-.js";import{_ as le,J as se,r as i,o as re,e as ae,i as f,g as c,K as de,t as n,L as x,A as a,z as d,x as _,M as I,v as m,N,O as A,y,P as ie,Q as V,R as D,B as g,S as h,T as ne}from"./BvuxK_1C.js";import{l as ce}from"./DaKztfBH.js";const ue={class:"header"},ge=["value"],ve={key:0},E=50,me={__name:"index",setup(pe){const z=se();i({});let o=i([]);Number(z.params.id);const b=i(0),w=i(0),k=i(E),C=i(!1),v=i(null),R=window.innerWidth<640,l=i(R?2:6),r=i([]);re(async()=>{window.addEventListener("resize",()=>{window.innerWidth<640&&(l.value=2)}),await U(),document.addEventListener("click",S),v.value&&B.observe(v.value)}),ae(()=>{document.removeEventListener("click",S),v.value&&B.unobserve(v.value)});const U=async()=>{let e=await $fetch("https://merchandising-uat.searchtap.io/api/client/1/collection/1/products-v2",{method:"GET",headers:{Authorization:"Bearer y1OUDAmQiU2AieXqzxePmm902rHLkOjevpxWk8A7okuxhzcfadjakjdKSDIJHhjsih@#466bCTWU7jpPij4pAzSu1695oxZL5ZSPbtDIXdXABJZrbm1L9RYayS2hc"}});console.log(e,"dsfds"),o.value=e.data.products,P()},P=()=>{if(w.value+k.value>=o.value.length){C.value=!0;return}k.value+=E},j=e=>{o.value[e].selected=!o.value[e].selected,o.value[e].selected?r.value.push(o.value[e]):r.value=r.value.filter(t=>t.productId!==o.value[e].productId)},W=e=>{console.log("drag end"),u()},u=()=>{o.value.forEach(e=>e.selected=!1),r.value=[]},S=e=>{!e.target.closest(".draggable")&&!e.target.closest("#navigationBar")&&u()},O=()=>{if(r.value.length===0){alert("No products selected");return}o.value=o.value.filter(t=>!t.selected);let e=Math.max(0,Math.min(b.value-1,o.value.length));o.value.splice(e,0,...r.value),u()},X=()=>{if(r.value.length===0){alert("No products selected");return}o.value=o.value.filter(e=>!e.selected),o.value.unshift(...r.value),u()},F=()=>{if(r.value.length===0){alert("No products selected");return}o.value=o.value.filter(e=>!e.selected),o.value.push(...r.value),u()},G=f(()=>r.value.length>0),J=f(()=>o.value.slice(w.value,k.value)),B=new IntersectionObserver(e=>{e[0].isIntersecting&&P()},{root:null,rootMargin:"0px",threshold:1}),Z=f(()=>({"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 lg:grid-cols-1":l.value===1,"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2":l.value===2,"grid grid-cols-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3":l.value===3,"grid grid-cols-4 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-4":l.value===4,"grid grid-cols-5 sm:grid-cols-2 md:grid-cols-5 lg:grid-cols-5":l.value===5,"grid grid-cols-6 sm:grid-cols-2 md:grid-cols-6 lg:grid-cols-6":l.value===6,"grid grid-cols-7 sm:grid-cols-2 md:grid-cols-7 lg:grid-cols-7":l.value===7,"grid grid-cols-8 sm:grid-cols-2 md:grid-cols-8 lg:grid-cols-8":l.value===8,"grid grid-cols-9 sm:grid-cols-2 md:grid-cols-9 lg:grid-cols-9":l.value===9,"grid grid-cols-10 sm:grid-cols-2 md:grid-cols-10 lg:grid-cols-10":l.value===10,"grid grid-cols-11 sm:grid-cols-2 md:grid-cols-11 lg:grid-cols-11":l.value===11,"grid grid-cols-12 sm:grid-cols-2 md:grid-cols-12 lg:grid-cols-12":l.value===12,"gap-4":!0})),$=f(()=>window.innerWidth<640?2:12);return(e,t)=>{const H=te,T=c("LegacyStack"),L=c("Text"),K=c("TextField"),p=c("Button"),Q=c("ButtonGroup"),q=c("LegacyCard"),Y=c("Page"),ee=de("sortable");return n(),x(h(ne),{i18n:h(ce)},{default:a(()=>[d(Y,{fullWidth:"",title:"Visual Merchandising"},{default:a(()=>[d(q,{title:"Drag and drop",sectioned:""},{default:a(()=>[d(T,{spacing:"loose",vertical:""},{default:a(()=>[_("div",ue,[t[2]||(t[2]=_("label",{for:"cardsPerRow"},"Cards per row:",-1)),I(_("select",{id:"cardsPerRow","onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s)},[(n(!0),m(N,null,A($.value,s=>(n(),m("option",{key:s,value:s},y(s),9,ge))),128))],512),[[ie,l.value]])]),I((n(),m("div",{class:V(Z.value)},[(n(!0),m(N,null,A(J.value,(s,oe)=>{var M;return n(),x(H,{class:V([{"sortable-selected":s.selected},"draggable rounded"]),key:s.productId,"product-image":(M=s.image)==null?void 0:M.src,"product-id":s.productId,"product-name":s.title,onClick:fe=>j(oe)},null,8,["class","product-image","product-id","product-name","onClick"])}),128))],2)),[[ee,{animation:0,onEnd:W}]]),_("div",{ref_key:"loadMoreTrigger",ref:v,class:"load-more-trigger"},null,512),C.value?(n(),m("p",ve,"No more products to load")):D("",!0)]),_:1}),G.value?(n(),x(T,{key:0,id:"navigationBar",distribution:"trailing"},{default:a(()=>[d(L,{variant:"headingXs",as:"h6"},{default:a(()=>[g(y(h(o).length)+" Products ",1)]),_:1}),d(L,{variant:"headingXs",as:"h6"},{default:a(()=>[g(y(r.value.length)+" Selected ",1)]),_:1}),d(K,{min:1,max:h(o).length,type:"number",label:"Send to position",modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),autoComplete:"off",class:"flex-1"},null,8,["max","modelValue"]),d(Q,{class:"flex flex-row gap-2 pt-2"},{default:a(()=>[d(p,{onClick:O,variant:"primary",class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded"},{default:a(()=>t[3]||(t[3]=[g("Send ")])),_:1}),d(p,{onClick:X,variant:"primary"},{default:a(()=>t[4]||(t[4]=[g("Send to Top")])),_:1}),d(p,{onClick:F,variant:"primary"},{default:a(()=>t[5]||(t[5]=[g("Send to Bottom")])),_:1}),d(p,{onClick:u,class:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded"},{default:a(()=>t[6]||(t[6]=[g("Unselect ")])),_:1})]),_:1})]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1},8,["i18n"])}}},ke=le(me,[["__scopeId","data-v-f52fae7b"]]);export{ke as default};
