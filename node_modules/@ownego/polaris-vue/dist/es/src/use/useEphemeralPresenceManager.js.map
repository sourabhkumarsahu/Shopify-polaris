{"version":3,"file":"useEphemeralPresenceManager.js","sources":["../../../../src/use/useEphemeralPresenceManager.ts"],"sourcesContent":["import { computed, inject, ref } from 'vue';\n\nexport type EphemeralPresenceKey = 'tooltip';\n\nexport interface EphemeralPresenceManagerContextType {\n  presenceList: {\n    [key in EphemeralPresenceKey]: boolean;\n  };\n  presenceCounter: {\n    [key in EphemeralPresenceKey]: number;\n  };\n  addPresence: (key: EphemeralPresenceKey) => void;\n  removePresence: (key: EphemeralPresenceKey) => void;\n}\n\ntype PresenceList = {\n  [key in EphemeralPresenceKey]: boolean;\n};\n\ntype PresenceCounter = {\n  [key in EphemeralPresenceKey]: number;\n};\n\n\nexport default function useEphemeralPresenceManager() {\n  const context = inject('ephemeral-presence-manager');\n  return context;\n}\n\nexport function useEphemeralPresenceManagerContext() {\n  const presenceCounter = ref<PresenceCounter>({ tooltip: 0 });\n\n  const addPresence = (key: EphemeralPresenceKey) => {\n    presenceCounter.value[key] += 1;\n  };\n\n  const removePresence = (key: EphemeralPresenceKey) => {\n    presenceCounter.value[key] -= 1;\n  };\n\n  const presenceList = computed<PresenceList>(() => {\n    return Object.entries(presenceCounter.value).reduce((prevValue, currentValue) => {\n      const [key, value] = currentValue;\n\n      return {\n        ...prevValue,\n        [key]: value > 0,\n      };\n    }, {} as PresenceList);\n  });\n\n  return {\n    presenceList,\n    presenceCounter,\n    addPresence,\n    removePresence,\n  };\n}\n"],"names":[],"mappings":";AA6BO,SAAS,qCAAqC;AACnD,QAAM,kBAAkB,IAAqB,EAAE,SAAS,EAAG,CAAA;AAErD,QAAA,cAAc,CAAC,QAA8B;AACjC,oBAAA,MAAM,GAAG,KAAK;AAAA,EAAA;AAG1B,QAAA,iBAAiB,CAAC,QAA8B;AACpC,oBAAA,MAAM,GAAG,KAAK;AAAA,EAAA;AAG1B,QAAA,eAAe,SAAuB,MAAM;AACzC,WAAA,OAAO,QAAQ,gBAAgB,KAAK,EAAE,OAAO,CAAC,WAAW,iBAAiB;AACzE,YAAA,CAAC,KAAK,KAAK,IAAI;AAEd,aAAA;AAAA,QACL,GAAG;AAAA,QACH,CAAC,GAAG,GAAG,QAAQ;AAAA,MAAA;AAAA,IAEnB,GAAG,CAAkB,CAAA;AAAA,EAAA,CACtB;AAEM,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;"}