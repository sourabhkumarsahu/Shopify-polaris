{"version":3,"file":"useExtractFragment.js","sources":["../../../../src/use/useExtractFragment.ts"],"sourcesContent":["import { computed } from 'vue';\nimport type { VNode, VNodeArrayChildren } from 'vue';\n\n/**\n * Extracts the children of a fragment.\n * Note: This is a workaround to fix the issue with Vue 3 fragments.\n *    By the way for now, in mostly cases, we can loop over the children of a slot, then use <component :is>\n *    to render the children.\n *\n * @returns {extractElement} A function that returns the children of a fragment.\n * @returns {slotsElms} All the children of a fragment and the fragment itself, in this case fragment is the slot.\n */\nexport function useExtractFragment(slot?: any) {\n  const slotsElms = computed(() => {\n    let elm: VNode[] = [];\n\n    if (slot) {\n      const groups = slot().map((group: VNode) => {\n        if (group.children && group.children.length) {\n          return extractElement(group);\n        }\n\n        return group;\n      })\n\n      elm = groups.flat();\n    }\n\n    return elm;\n  });\n\n  const isFragment = (item: any) => {\n    return item.type?.toString() === 'Symbol(Fragment)'\n      || item.type?.toString() === 'Symbol()'\n      || item.type?.toString() === 'Symbol(v-fgt)'; // this check is for Slots type in Vue 3\n  }\n\n  const extractElement = (elm: any) => {\n    if (!isFragment(elm)) {\n      return [elm];\n    }\n\n    const children = elm.children as VNodeArrayChildren;\n    const items: VNodeArrayChildren = [];\n\n    for (const child of children) {\n      if (isFragment(child)) {\n        items.push(...extractElement(child));\n      } else {\n        items.push(child);\n      }\n    }\n    return items;\n  }\n\n  return {\n    slotsElms,\n    extractElement,\n  };\n}\n"],"names":[],"mappings":";AAYO,SAAS,mBAAmB,MAAY;AACvC,QAAA,YAAY,SAAS,MAAM;AAC/B,QAAI,MAAe,CAAA;AAEnB,QAAI,MAAM;AACR,YAAM,SAAS,KAAA,EAAO,IAAI,CAAC,UAAiB;AAC1C,YAAI,MAAM,YAAY,MAAM,SAAS,QAAQ;AAC3C,iBAAO,eAAe,KAAK;AAAA,QAC7B;AAEO,eAAA;AAAA,MAAA,CACR;AAED,YAAM,OAAO;IACf;AAEO,WAAA;AAAA,EAAA,CACR;AAEK,QAAA,aAAa,CAAC,SAAc;;AAChC,aAAO,UAAK,SAAL,mBAAW,gBAAe,wBAC5B,UAAK,SAAL,mBAAW,gBAAe,gBAC1B,UAAK,SAAL,mBAAW,gBAAe;AAAA,EAAA;AAG3B,QAAA,iBAAiB,CAAC,QAAa;AAC/B,QAAA,CAAC,WAAW,GAAG,GAAG;AACpB,aAAO,CAAC,GAAG;AAAA,IACb;AAEA,UAAM,WAAW,IAAI;AACrB,UAAM,QAA4B,CAAA;AAElC,eAAW,SAAS,UAAU;AACxB,UAAA,WAAW,KAAK,GAAG;AACrB,cAAM,KAAK,GAAG,eAAe,KAAK,CAAC;AAAA,MAAA,OAC9B;AACL,cAAM,KAAK,KAAK;AAAA,MAClB;AAAA,IACF;AACO,WAAA;AAAA,EAAA;AAGF,SAAA;AAAA,IACL;AAAA,IACA;AAAA,EAAA;AAEJ;"}