{"version":3,"file":"KeypressListener.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/KeypressListener/KeypressListener.vue"],"sourcesContent":["<template lang=\"pug\">\n</template>\n\n<script setup lang=\"ts\">\nimport {\n  ref,\n  onMounted,\n  onBeforeUnmount,\n} from 'vue';\nimport type { Key } from '@/utilities/types';\n\ntype KeyEvent = 'keydown' | 'keyup';\n\nexport type NonMutuallyExclusiveProps = {\n  keyCode: Key;\n  handler(event: KeyboardEvent): void;\n  keyEvent?: KeyEvent;\n}\n\nexport type KeypressListenerProps = NonMutuallyExclusiveProps &\n  (\n    | { useCapture?: boolean; options?: undefined }\n    | { useCapture?: undefined; options?: AddEventListenerOptions }\n  );\n\nconst props = withDefaults(defineProps<KeypressListenerProps>(), {\n  keyEvent: 'keyup',\n});\n\n/**\n * Note: handler and keyCode will be re-assign every time props change\n * but we still not met any case that need to change handler or keyCode every time props change\n * => So just need in install their value at the beginning\n */\nconst tracked = ref({\n  handler: props.handler,\n  keyCode: props.keyCode,\n});\n\nonMounted(() => {\n  document.addEventListener(\n    props.keyEvent || 'keyup',\n    handleKeyEvent,\n    props.useCapture || props.options,\n  );\n});\n\nonBeforeUnmount(() => {\n  document.removeEventListener(\n    props.keyEvent || 'keyup',\n    handleKeyEvent,\n    props.useCapture || props.options,\n  );\n});\n\nconst handleKeyEvent = (event: KeyboardEvent) => {\n  const { handler, keyCode } = tracked.value;\n\n  if (event.keyCode === keyCode) {\n    handler(event);\n  }\n};\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;AAyBA,UAAM,QAAQ;AASd,UAAM,UAAU,IAAI;AAAA,MAClB,SAAS,MAAM;AAAA,MACf,SAAS,MAAM;AAAA,IAAA,CAChB;AAED,cAAU,MAAM;AACL,eAAA;AAAA,QACP,MAAM,YAAY;AAAA,QAClB;AAAA,QACA,MAAM,cAAc,MAAM;AAAA,MAAA;AAAA,IAC5B,CACD;AAED,oBAAgB,MAAM;AACX,eAAA;AAAA,QACP,MAAM,YAAY;AAAA,QAClB;AAAA,QACA,MAAM,cAAc,MAAM;AAAA,MAAA;AAAA,IAC5B,CACD;AAEK,UAAA,iBAAiB,CAAC,UAAyB;AAC/C,YAAM,EAAE,SAAS,YAAY,QAAQ;AAEjC,UAAA,MAAM,YAAY,SAAS;AAC7B,gBAAQ,KAAK;AAAA,MACf;AAAA,IAAA;;;;;;"}