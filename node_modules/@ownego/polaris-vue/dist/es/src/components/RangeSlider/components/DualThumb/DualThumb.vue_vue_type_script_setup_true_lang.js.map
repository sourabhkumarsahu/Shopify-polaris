{"version":3,"file":"DualThumb.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../../../src/components/RangeSlider/components/DualThumb/DualThumb.vue"],"sourcesContent":["<template lang=\"pug\">\nLabelled(\n  :id=\"id\",\n  :error=\"error\",\n  :action=\"labelAction\",\n  :label-hidden=\"labelHidden\"\n)\n  template(v-if=\"hasLabel\", #label)\n    slot(v-if=\"slots.label\", name=\"label\")\n    template(v-else) {{ label }}\n\n  template(v-if=\"hasHelpText\", #helpText)\n    slot(v-if=\"slots.helpText\", name=\"helpText\")\n    template(v-else) {{ helpText }}\n\n  div(:class=\"classNames(styles.DualThumb, sharedStyles.RangeSlider)\")\n    div(v-if=\"hasPrefix\", :class=\"styles.Prefix\")\n      slot(v-if=\"slots.prefix\", name=\"prefix\")\n      template(v-else) {{ prefix }}\n\n    div(\n      ref=\"trackWrapper\",\n      :class=\"trackWrapperClassName\",\n      @mousedown=\"handleMouseDownTrack\",\n    )\n      div(:class=\"styles.Track\", :style=\"cssVars\", ref=\"track\")\n      div(:class=\"sharedStyles['Track--dashed']\")\n      div(\n        ref=\"thumbLower\",\n        :id=\"idLower\",\n        :class=\"thumbLowerClassName\",\n        :style=\"{ left: `${leftPositionThumbLower}px` }\",\n        role=\"slider\",\n        :aria-disabled=\"disabled\",\n        :aria-valuemin=\"min\",\n        :aria-valuemax=\"max\",\n        :aria-valuenow=\"model[0]\",\n        :aria-invalid=\"Boolean(error)\",\n        :aria-describedby=\"ariaDescribedBy\",\n        :aria-labelledby=\"labelId(id)\",\n        tabindex=\"0\",\n        @focus=\"emits('focus')\",\n        @blur=\"emits('blur')\",\n        @keydown=\"handleKeypressLower\",\n        @mousedown=\"handleMouseDownThumbLower\",\n        @touchstart=\"handleTouchStartThumbLower\",\n      )\n      output(\n        v-if=\"!disabled && output\",\n        :for=\"idLower\",\n        :class=\"outputLowerClassName\",\n        :style=\"{ left: `${leftPositionThumbLower}px` }\",\n      )\n        div(:class=\"styles.OutputBubble\")\n          Text(\n            as=\"span\",\n            variant=\"headingSm\",\n            alignment=\"center\",\n          ) {{ model[0] }}\n\n      div(\n        ref=\"thumbUpper\",\n        :id=\"idUpper\",\n        :class=\"thumbUpperClassName\",\n        :style=\"{ left: `${leftPositionThumbUpper}px` }\",\n        role=\"slider\",\n        :aria-disabled=\"disabled\",\n        :aria-valuemin=\"min\",\n        :aria-valuemax=\"max\",\n        :aria-valuenow=\"model[1]\",\n        :aria-invalid=\"Boolean(error)\",\n        :aria-describedby=\"ariaDescribedBy\",\n        :aria-labelledby=\"labelId(id)\",\n        tabindex=\"0\",\n        @focus=\"emits('focus')\",\n        @blur=\"emits('blur')\",\n        @keydown=\"handleKeypressUpper\",\n        @mousedown=\"handleMouseDownThumbUpper\",\n        @touchstart=\"handleTouchStartThumbUpper\",\n      )\n      output(\n        v-if=\"!disabled && output\",\n        :for=\"idUpper\",\n        :class=\"outputUpperClassName\",\n        :style=\"{ left: `${leftPositionThumbUpper}px` }\",\n      )\n        div(:class=\"styles.OutputBubble\")\n          Text(\n            as=\"span\",\n            variant=\"headingSm\",\n            alignment=\"center\",\n          ) {{ model[1] }}\n\n    div(v-if=\"hasSuffix\", :class=\"styles.Suffix\")\n      slot(v-if=\"slots.suffix\", name=\"suffix\")\n      template(v-else) {{ suffix }}\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport { debounce } from '@polaris/utilities/debounce';\nimport { classNames } from '@/utilities/css';\nimport type {\n  DualValue,\n  RangeSliderProps,\n  RangeSliderSlots,\n  RangeSliderEvents,\n} from '../../types';\nimport { Labelled, Text } from '@/components';\nimport { labelId } from '@/components/Label/utils';\nimport { Key } from '@/utilities/types';\nimport { useEventListener } from '@/utilities/use-event-listener';\nimport { useHasSlot } from '@/use/useHasSlot';\n\nimport sharedStyles from '@polaris/components/RangeSlider/RangeSlider.module.css';\nimport styles from '@polaris/components/RangeSlider/components/DualThumb/DualThumb.module.css';\n\nexport type DualThumbProps = RangeSliderProps & {\n  id: string;\n  min: number;\n  max: number;\n  step: number;\n}\n\ninterface KeyHandlers {\n  [key: string]: () => void;\n}\n\nenum Control {\n  Lower,\n  Upper,\n}\n\nconst props = defineProps<DualThumbProps>();\nconst slots = defineSlots<RangeSliderSlots>();\nconst emits = defineEmits<RangeSliderEvents>();\n\nconst { hasSlot } = useHasSlot();\n\nconst model = defineModel<DualValue>({\n  required: true,\n});\n\nconst trackWidth = ref(0);\nconst trackLeft = ref(0);\nconst thumbLower = ref<HTMLDivElement | null>(null);\nconst thumbUpper = ref<HTMLDivElement | null>(null);\nconst track = ref<HTMLDivElement | null>(null);\nconst trackWrapper = ref<HTMLDivElement | null>(null);\n\nconst idLower = computed(() => props.id);\nconst idUpper = computed(() => `${props.id}Upper`);\n\nconst ariaDescribedBy = computed(() => {\n  const describedBy = [];\n\n  if (props.error) {\n    describedBy.push(`${props.id}Error`);\n  }\n\n  return describedBy.length ? describedBy.join(' ') : undefined;\n});\n\nconst trackWrapperClassName = computed(() => classNames(\n  styles.TrackWrapper,\n  props.error && styles.error,\n  props.disabled && styles.disabled,\n));\n\nconst thumbLowerClassName = computed(() => classNames(\n  styles.Thumbs,\n  styles.ThumbLower,\n  props.disabled && styles.disabled,\n));\n\nconst thumbUpperClassName = computed(() => classNames(\n  styles.Thumbs,\n  styles.ThumbUpper,\n  props.disabled && styles.disabled,\n));\n\nconst range = computed(() => props.max - props.min);\nconst minValuePosition = computed(() => (props.min / range.value) * trackWidth.value);\n\nconst leftPositionThumbLower = computed(() => (\n  (model.value[0] / range.value) * trackWidth.value) - minValuePosition.value\n);\nconst leftPositionThumbUpper = computed(() => (\n  (model.value[1] / range.value) * trackWidth.value) - minValuePosition.value\n);\n\nconst outputLowerClassName = computed(() => classNames(styles.Output, styles.OutputLower));\nconst outputUpperClassName = computed(() => classNames(styles.Output, styles.OutputUpper));\n\nconst cssVars = computed(() => ({\n  '--pc-range-slider-progress-lower': `${leftPositionThumbLower.value}px`,\n  '--pc-range-slider-progress-upper': `${leftPositionThumbUpper.value}px`,\n}));\n\nconst hasLabel = computed(() => hasSlot(slots.label) || props.label);\nconst hasHelpText = computed(() => hasSlot(slots.helpText) || props.helpText);\nconst hasPrefix = computed(() => hasSlot(slots.prefix) || props.prefix);\nconst hasSuffix = computed(() => hasSlot(slots.suffix) || props.suffix);\n\nonMounted(() => {\n  setTrackPosition();\n\n  if (trackWrapper.value) {\n    trackWrapper.value.addEventListener('touchstart', handleTouchStartTrack, { passive: false });\n  }\n});\n\nwatch(() => track.value, () => {\n  setTrackPosition();\n});\n\nonBeforeUnmount(() => {\n  if (trackWrapper.value) {\n    trackWrapper.value.removeEventListener('touchstart', handleTouchStartTrack);\n  }\n});\n\n/**\n * Methods\n */\nconst setTrackPosition = debounce(\n  () => {\n    if (track.value) {\n      const thumbSize = 16;\n\n      const {width, left} = track.value.getBoundingClientRect();\n      const adjustedTrackWidth = width - thumbSize;\n      const adjustedTrackLeft = left + thumbSize / 2;\n\n      const range = props.max - props.min;\n      const minValuePosition = (props.min / range) * adjustedTrackWidth;\n\n      trackWidth.value = adjustedTrackWidth;\n      trackLeft.value = adjustedTrackLeft - minValuePosition;\n    }\n  },\n  40,\n  {leading: true, trailing: true, maxWait: 40},\n);\n\nuseEventListener('resize', setTrackPosition);\n\nconst handleMouseDownThumbLower = (event: MouseEvent) => {\n  if (event.button !== 0 || props.disabled) return;\n  registerMouseMoveHandler(handleMouseMoveThumbLower);\n  event.stopPropagation();\n};\n\nconst handleMouseMoveThumbLower = (event: MouseEvent) => {\n  const valueUpper = model.value[1];\n\n  setValue(\n    [actualXPosition(event.clientX), valueUpper],\n    Control.Upper,\n  );\n};\n\nconst handleTouchStartThumbLower = (event: TouchEvent) => {\n  if (props.disabled) return;\n  registerTouchMoveHandler(handleTouchMoveThumbLower);\n  event.stopPropagation();\n};\n\nconst handleTouchMoveThumbLower = (event: TouchEvent) => {\n  event.preventDefault();\n  const valueUpper = model.value[1];\n\n  setValue(\n    [actualXPosition(event.touches[0].clientX), valueUpper],\n    Control.Upper,\n  );\n};\n\nconst handleMouseDownThumbUpper = (event: MouseEvent) => {\n  if (event.button !== 0 || props.disabled) return;\n  registerMouseMoveHandler(handleMouseMoveThumbUpper);\n  event.stopPropagation();\n};\n\nconst handleMouseMoveThumbUpper = (event: MouseEvent) => {\n  const valueLower = model.value[0];\n\n  setValue(\n    [valueLower, actualXPosition(event.clientX)],\n    Control.Lower,\n  );\n};\n\nconst handleTouchStartThumbUpper = (event: TouchEvent) => {\n  if (props.disabled) return;\n  registerTouchMoveHandler(handleTouchMoveThumbUpper);\n  event.stopPropagation();\n};\n\nconst handleTouchMoveThumbUpper = (event: TouchEvent) => {\n  event.preventDefault();\n  const valueLower = model.value[0];\n  setValue(\n    [valueLower, actualXPosition(event.touches[0].clientX)],\n    Control.Lower,\n  );\n};\n\nconst handleKeypressLower = (event: KeyboardEvent) => {\n  if (props.disabled) return;\n\n  const handlerMap: KeyHandlers = {\n    [Key.UpArrow]: incrementValueLower,\n    [Key.RightArrow]: incrementValueLower,\n    [Key.DownArrow]: decrementValueLower,\n    [Key.LeftArrow]: decrementValueLower,\n  };\n\n  const handler = handlerMap[event.keyCode];\n\n  if (handler != null) {\n    event.preventDefault();\n    event.stopPropagation();\n    handler();\n  }\n};\n\nconst handleKeypressUpper = (event: KeyboardEvent) => {\n  if (props.disabled) return;\n\n  const handlerMap: KeyHandlers = {\n    [Key.UpArrow]: incrementValueUpper,\n    [Key.RightArrow]: incrementValueUpper,\n    [Key.DownArrow]: decrementValueUpper,\n    [Key.LeftArrow]: decrementValueUpper,\n  };\n\n  const handler = handlerMap[event.keyCode];\n\n  if (handler != null) {\n    event.preventDefault();\n    event.stopPropagation();\n    handler();\n  }\n};\n\nconst incrementValueLower = () => {\n  setValue(\n    [model.value[0] + props.step, model.value[1]],\n    Control.Upper,\n  );\n};\n\nconst decrementValueLower = () => {\n  setValue(\n    [model.value[0] - props.step, model.value[1]],\n    Control.Upper,\n  );\n};\n\nconst incrementValueUpper = () => {\n  setValue(\n    [model.value[0], model.value[1] + props.step],\n    Control.Lower,\n  );\n};\n\nconst decrementValueUpper = () => {\n  setValue(\n    [model.value[0], model.value[1] - props.step],\n    Control.Lower,\n  );\n};\n\nconst setValue = (dirtyValue: DualValue, control: Control) => {\n  const sanitizedValue = sanitizeValue(dirtyValue, props.min, props.max, props.step, control);\n\n  if (isTupleEqual(sanitizedValue, model.value) === false) {\n    model.value = sanitizedValue;\n    emits('change', sanitizedValue, props.id);\n  }\n};\n\nconst handleMouseDownTrack = (event: MouseEvent) => {\n  if (event.button !== 0 || props.disabled) return;\n  event.preventDefault();\n  const clickXPosition = actualXPosition(event.clientX);\n\n  const distanceFromLowerThumb = Math.abs(model.value[0] - clickXPosition);\n  const distanceFromUpperThumb = Math.abs(model.value[1] - clickXPosition);\n\n  if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n    setValue([clickXPosition, model.value[1]], Control.Upper);\n    registerMouseMoveHandler(handleMouseMoveThumbLower);\n\n    if (thumbLower.value) {\n      thumbLower.value.focus();\n    }\n  } else {\n    setValue([model.value[0], clickXPosition], Control.Lower);\n    registerMouseMoveHandler(handleMouseMoveThumbUpper);\n\n    if (thumbUpper.value) {\n      thumbUpper.value.focus();\n    }\n  }\n};\n\nconst handleTouchStartTrack = (event: TouchEvent) => {\n  if (props.disabled) return;\n  event.preventDefault();\n  const clickXPosition = actualXPosition(event.touches[0].clientX);\n\n  const distanceFromLowerThumb = Math.abs(model.value[0] - clickXPosition);\n  const distanceFromUpperThumb = Math.abs(model.value[1] - clickXPosition);\n\n  if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n    setValue([clickXPosition, model.value[1]], Control.Upper);\n    registerTouchMoveHandler(handleTouchMoveThumbLower);\n\n    if (thumbLower.value) {\n      thumbLower.value.focus();\n    }\n  } else {\n    setValue([model.value[0], clickXPosition], Control.Lower);\n    registerTouchMoveHandler(handleTouchMoveThumbUpper);\n\n    if (thumbUpper.value) {\n      thumbUpper.value.focus();\n    }\n  }\n};\n\nconst actualXPosition = (dirtyXPosition: number): number => {\n  if (track.value) {\n    const relativeX = dirtyXPosition - trackLeft.value;\n    const percentageOfTrack = relativeX / trackWidth.value;\n\n    return percentageOfTrack * (props.max - props.min);\n  } else {\n    return 0;\n  }\n};\n\nfunction registerMouseMoveHandler(handler: (event: MouseEvent) => void) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener(\n    'mouseup',\n    () => {\n      document.removeEventListener('mousemove', handler);\n    },\n    {once: true},\n  );\n}\n\nfunction registerTouchMoveHandler(handler: (event: TouchEvent) => void) {\n  const removeHandler = () => {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {passive: false});\n  document.addEventListener('touchend', removeHandler, {once: true});\n  document.addEventListener('touchcancel', removeHandler, {once: true});\n}\n\nfunction sanitizeValue(\n  value: DualValue,\n  min: number,\n  max: number,\n  step: number,\n  control = Control.Upper,\n): DualValue {\n  let upperValue = inBoundsUpper(roundedToStep(value[1]));\n  let lowerValue = inBoundsLower(roundedToStep(value[0]));\n  const maxLowerValue = upperValue - step;\n  const minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value: number): number {\n    const lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value: number): number {\n    const upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value: number) {\n    return Math.round(value / step) * step;\n  }\n}\n\nfunction isTupleEqual(a?: DualValue, b?: DualValue) {\n  if (!a || !b) {\n    return false;\n  }\n\n  return a[0] === b[0] && a[1] === b[1];\n}\n</script>\n"],"names":["_useSlots","_useModel","range","minValuePosition","value"],"mappings":"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"}