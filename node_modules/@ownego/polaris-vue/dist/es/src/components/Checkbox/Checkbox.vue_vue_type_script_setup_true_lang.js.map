{"version":3,"file":"Checkbox.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/Checkbox/Checkbox.vue"],"sourcesContent":["<template lang=\"pug\">\nChoice(\n  :id=\"id\",\n  :label-hidden=\"labelHidden\",\n  :disabled=\"disabled\",\n  :label-class-name=\"classNames(styles.ChoiceLabel, labelClassName)\",\n  :fill=\"fill\",\n  :tone=\"tone\",\n  v-bind=\"extraChoiceProps\",\n)\n  template(v-if=\"hasSlot(slots.label) || label\", #label)\n    slot(v-if=\"hasSlot(slots.label)\", name=\"label\")\n    template(v-else) {{ props.label }}\n\n  template(v-if=\"hasSlot(slots.helpText) || helpText\", #helpText)\n    slot(v-if=\"hasSlot(slots.helpText)\", name=\"helpText\")\n    template(v-else) {{ props.helpText }}\n\n  span(:class=\"wrapperClassName\")\n    input(\n      ref=\"inputNode\",\n      type=\"checkbox\",\n      :id=\"id\",\n      :name=\"name\",\n      :value=\"value\",\n      :checked=\"isChecked\",\n      :disabled=\"disabled\",\n      :class=\"inputClassName\",\n      :aria-invalid=\"Boolean(error)\",\n      :aria-controls=\"ariaControls\",\n      :aria-describedby=\"ariaDescribedBy\",\n      :role=\"isWithinListbox ? 'presentation' : 'checkbox'\",\n      v-bind=\"indeterminateAttributes\",\n      @blur=\"handleBlur\",\n      @click=\"handleOnClick\",\n      @focus=\"handleFocus\",\n    )\n    span(\n      :class=\"styles.Backdrop\",\n      @click.stop=\"() => {}\",\n      @keyup.stop=\"() => {}\",\n    )\n    span(\n      :class=\"classNames(styles.Icon, !isIndeterminate && styles.animated)\",\n    )\n      Icon(\n        v-if=\"isIndeterminate\",\n        :source=\"MinusIcon\",\n      )\n      svg(\n        v-else\n        viewBox=\"0 0 16 16\"\n        shape-rendering=\"geometricPrecision\"\n        text-rendering=\"geometricPrecision\"\n      )\n        path(\n          :class=\"svgPathClassName\"\n          d=\"M1.5,5.5L3.44655,8.22517C3.72862,8.62007,4.30578,8.64717,4.62362,8.28044L10.5,1.5\"\n          transform=\"translate(2 2.980376)\"\n          opacity=\"0\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          pathLength=\"1\"\n        )\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { classNames, variationName, type ResponsiveProp } from '@/utilities/css';\nimport type { Error, VueNode } from '@/utilities/types';\nimport { useWithinListbox } from '@/use/useListbox';\nimport { useHasSlot } from '@/use/useHasSlot';\nimport useId from '@/use/useId';\nimport {\n  Choice,\n  Icon,\n} from '@/components';\nimport { helpTextID } from '../Choice/utils';\nimport type { ChoiceBleedProps } from '../Choice/types';\nimport { errorTextID } from '../InlineError/utils';\n\nimport MinusIcon from '@icons/MinusIcon.svg';\nimport styles from '@polaris/components/Checkbox/Checkbox.module.css';\n\nexport interface CheckboxProps extends ChoiceBleedProps {\n  /** Indicates the ID of the element that is controlled by the checkbox */\n  ariaControls?: string;\n  /** Indicates the ID of the element that describes the checkbox */\n  ariaDescribedBy?: string;\n  /** Label for the checkbox */\n  label?: string;\n  /** Visually hide the label */\n  labelHidden?: boolean;\n  /** Checkbox is selected. `indeterminate` shows a horizontal line in the checkbox */\n  checked?: boolean | 'indeterminate';\n  /** Disable input */\n  disabled?: boolean;\n  /** ID for form input */\n  id?: string;\n  /** Name for form input */\n  name?: string;\n  /** Value for form input */\n  value?: string;\n  /** Added to the wrapping label */\n  labelClassName?: string;\n  /** Grow to fill the space. Equivalent to width: 100%; height: 100% */\n  fill?: ResponsiveProp<boolean>;\n  /** Additional text to aide in use */\n  helpText?: string;\n  /** Display an error message */\n  error?: Error | boolean;\n  /** Indicates the tone of the checkbox */\n  tone?: 'magic';\n}\n\ntype CheckboxSlots = {\n  /** Label for the checkbox */\n  label: (_: VueNode) => any;\n  /** Additional text to aide in use */\n  helpText: (_: VueNode) => any;\n};\n\ntype CheckboxEvents = {\n  /** Callback when checkbox is toggled */\n  'change': [checked: boolean, id: string];\n  /** Callback when checkbox is focused */\n  'focus': [];\n  /** Callback when focus is removed */\n  'blur': [];\n};\n\nconst props = defineProps<CheckboxProps>();\nconst slots = defineSlots<CheckboxSlots>();\nconst emits = defineEmits<CheckboxEvents>();\n\nconst model = defineModel<boolean | string>();\n\nconst isWithinListbox = useWithinListbox();\nconst uniqId = useId();\nconst { hasSlot } = useHasSlot();\n\ndefineExpose({\n  focus: () => {\n    if (inputNode.value) {\n      inputNode.value.focus();\n    }\n  },\n});\n\nconst inputNode = ref<HTMLInputElement | null>(null);\n\nconst id = computed(() => props.id || `${uniqId}`);\n\nconst describedBy = computed(() => {\n  const output = [];\n\n  if (props.error && typeof props.error !== 'boolean') {\n    output.push(errorTextID(id.value));\n  }\n\n  if (Boolean(slots.helpText) || props.helpText) {\n    output.push(helpTextID(id.value));\n  }\n\n  if (props.ariaDescribedBy) {\n    output.push(props.ariaDescribedBy);\n  }\n\n  return output;\n});\n\nconst ariaDescribedBy = computed(() => describedBy.value.length\n  ? describedBy.value.join(' ')\n  : undefined\n);\nconst wrapperClassName = computed(() => classNames(styles.Checkbox, props.error && styles.error));\n\nconst isIndeterminate = computed(() => props.checked === 'indeterminate');\n\nconst isChecked = computed(() => Boolean(!isIndeterminate.value && model.value));\n\nconst indeterminateAttributes = computed(() => isIndeterminate.value\n  ? {indeterminate: true, 'aria-checked': 'mixed' as const}\n  : {'aria-checked': isChecked.value}\n);\n\nconst inputClassName = computed(() => classNames(\n  styles.Input,\n  isIndeterminate.value && styles['Input-indeterminate'],\n  props.tone && styles[variationName('tone', props.tone)],\n));\n\nconst extraChoiceProps = computed(() => ({\n  error: props.error,\n  bleed: props.bleed,\n  bleedBlockStart: props.bleedBlockStart,\n  bleedBlockEnd: props.bleedBlockEnd,\n  bleedInlineStart: props.bleedInlineStart,\n  bleedInlineEnd: props.bleedInlineEnd,\n}));\n\nconst svgPathClassName = computed(() => classNames(isChecked.value && styles.checked));\n\nwatch(\n  () => props.checked,\n  (value, oldVal) => {\n    if (value === oldVal) return;\n    model.value = value;\n  },\n  { flush: 'post'},\n);\n\nonMounted(() => {\n  if (props.checked) {\n    model.value = props.checked;\n  }\n});\n\nconst handleBlur = () => {\n  emits('blur');\n};\n\nconst handleFocus = () => {\n  emits('focus');\n};\n\nconst handleOnClick = () => {\n  if (!inputNode.value || props.disabled) {\n    return;\n  }\n\n  model.value = inputNode.value.checked;\n  inputNode.value.focus();\n  emits('change', inputNode.value.checked, props.value || id.value);\n};\n</script>\n"],"names":["_useSlots","_useModel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA,UAAM,QAAQ;AACd,UAAM,QAAQA;AACd,UAAM,QAAQ;AAER,UAAA,QAAQC,SAA6B,SAAA,YAAC;AAE5C,UAAM,kBAAkB;AACxB,UAAM,SAAS;AACT,UAAA,EAAE,YAAY;AAEP,aAAA;AAAA,MACX,OAAO,MAAM;AACX,YAAI,UAAU,OAAO;AACnB,oBAAU,MAAM;QAClB;AAAA,MACF;AAAA,IAAA,CACD;AAEK,UAAA,YAAY,IAA6B,IAAI;AAEnD,UAAM,KAAK,SAAS,MAAM,MAAM,MAAM,GAAG,MAAM,EAAE;AAE3C,UAAA,cAAc,SAAS,MAAM;AACjC,YAAM,SAAS,CAAA;AAEf,UAAI,MAAM,SAAS,OAAO,MAAM,UAAU,WAAW;AACnD,eAAO,KAAK,YAAY,GAAG,KAAK,CAAC;AAAA,MACnC;AAEA,UAAI,QAAQ,MAAM,QAAQ,KAAK,MAAM,UAAU;AAC7C,eAAO,KAAK,WAAW,GAAG,KAAK,CAAC;AAAA,MAClC;AAEA,UAAI,MAAM,iBAAiB;AAClB,eAAA,KAAK,MAAM,eAAe;AAAA,MACnC;AAEO,aAAA;AAAA,IAAA,CACR;AAED,UAAM,kBAAkB;AAAA,MAAS,MAAM,YAAY,MAAM,SACrD,YAAY,MAAM,KAAK,GAAG,IAC1B;AAAA,IAAA;AAEE,UAAA,mBAAmB,SAAS,MAAM,WAAW,OAAO,UAAU,MAAM,SAAS,OAAO,KAAK,CAAC;AAEhG,UAAM,kBAAkB,SAAS,MAAM,MAAM,YAAY,eAAe;AAElE,UAAA,YAAY,SAAS,MAAM,QAAQ,CAAC,gBAAgB,SAAS,MAAM,KAAK,CAAC;AAE/E,UAAM,0BAA0B;AAAA,MAAS,MAAM,gBAAgB,QAC3D,EAAC,eAAe,MAAM,gBAAgB,YACtC,EAAC,gBAAgB,UAAU,MAAK;AAAA,IAAA;AAG9B,UAAA,iBAAiB,SAAS,MAAM;AAAA,MACpC,OAAO;AAAA,MACP,gBAAgB,SAAS,OAAO,qBAAqB;AAAA,MACrD,MAAM,QAAQ,OAAO,cAAc,QAAQ,MAAM,IAAI,CAAC;AAAA,IAAA,CACvD;AAEK,UAAA,mBAAmB,SAAS,OAAO;AAAA,MACvC,OAAO,MAAM;AAAA,MACb,OAAO,MAAM;AAAA,MACb,iBAAiB,MAAM;AAAA,MACvB,eAAe,MAAM;AAAA,MACrB,kBAAkB,MAAM;AAAA,MACxB,gBAAgB,MAAM;AAAA,IACtB,EAAA;AAEI,UAAA,mBAAmB,SAAS,MAAM,WAAW,UAAU,SAAS,OAAO,OAAO,CAAC;AAErF;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,OAAO,WAAW;AACjB,YAAI,UAAU,OAAQ;AACtB,cAAM,QAAQ;AAAA,MAChB;AAAA,MACA,EAAE,OAAO,OAAM;AAAA,IAAA;AAGjB,cAAU,MAAM;AACd,UAAI,MAAM,SAAS;AACjB,cAAM,QAAQ,MAAM;AAAA,MACtB;AAAA,IAAA,CACD;AAED,UAAM,aAAa,MAAM;AACvB,YAAM,MAAM;AAAA,IAAA;AAGd,UAAM,cAAc,MAAM;AACxB,YAAM,OAAO;AAAA,IAAA;AAGf,UAAM,gBAAgB,MAAM;AAC1B,UAAI,CAAC,UAAU,SAAS,MAAM,UAAU;AACtC;AAAA,MACF;AAEM,YAAA,QAAQ,UAAU,MAAM;AAC9B,gBAAU,MAAM;AAChB,YAAM,UAAU,UAAU,MAAM,SAAS,MAAM,SAAS,GAAG,KAAK;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}