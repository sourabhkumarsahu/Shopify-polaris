{"version":3,"file":"VideoThumbnail.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/VideoThumbnail/VideoThumbnail.vue"],"sourcesContent":["<template lang=\"pug\">\ndiv(:class=\"styles.ThumbnailContainer\")\n  div(\n    :class=\"styles.Thumbnail\",\n    :style=\"{ backgroundImage: `url(${thumbnailUrl})` }\",\n  )\n  button(\n    type=\"button\",\n    :class=\"styles.PlayButton\",\n    :aria-label=\"buttonLabel\",\n    @click=\"emits('click')\",\n    @mouseenter=\"emits('before-start-playing')\",\n    @focus=\"emits('before-start-playing')\",\n    @touchstart=\"emits('before-start-playing')\",\n  )\n    div(\n      v-if=\"videoLength\",\n      :class=\"styles.Timestamp\",\n    )\n      LegacyStack(alignment=\"center\", spacing=\"extraTight\")\n        span(:class=\"styles.PlayIcon\")\n          Icon(:source=\"PlayIcon\")\n        Text(\n          as=\"p\",\n          fontWeight=\"semibold\",\n          :variant=\"isNavigationCollapsed ? 'bodyLg' : 'bodyMd'\",\n        ) {{ secondsToTimestamp(videoLength) }}\n  div(\n    v-if=\"showVideoProgress\",\n    :class=\"styles.Progress\",\n  )\n    progress(\n      max=\"100\",\n      :class=\"styles.ProgressBar\",\n      :value=\"progressValuePercents\",\n    )\n    div(\n      :class=\"styles.Indicator\",\n      :style=\"{ transform: `scaleX(${progressValue})` }\",\n    )\n      span(:class=\"styles.Label\") {{ progressValuePercents + '%' }}\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject } from 'vue';\nimport { LegacyStack, Text, Icon } from '@/components';\nimport {\n  secondsToTimeComponents,\n  secondsToDurationTranslationKey,\n  secondsToTimestamp,\n} from '@polaris/utilities/duration';\nimport PlayIcon from '@icons/PlayIcon.svg';\nimport useI18n from '@/use/useI18n';\nimport styles from '@polaris/components/VideoThumbnail/VideoThumbnail.module.css';\nimport type {\n  VideoThumbnailProps,\n  VideoThumbnailEvents,\n  MediaQueryType,\n} from './types';\n\nconst props = withDefaults(defineProps<VideoThumbnailProps>(), {\n  videoLength: 0,\n  videoProgress: 0,\n  showVideoProgress: false,\n});\n\nconst emits = defineEmits<VideoThumbnailEvents>();\n\nconst i18n = useI18n();\n\nconst mediaQuery = inject<MediaQueryType | undefined>('media-query', undefined);\n\nconst isNavigationCollapsed = computed(() => mediaQuery?.isNavigationCollapsed || false);\n\nconst buttonLabel = computed(() => {\n  if (props.accessibilityLabel) {\n    return props.accessibilityLabel;\n  } else if (props.videoLength) {\n    const { hours, minutes, seconds } = secondsToTimeComponents(props.videoLength);\n\n    return i18n.translate(\n      'Polaris.VideoThumbnail.playButtonA11yLabel.defaultWithDuration',\n      {\n        duration: i18n.translate(secondsToDurationTranslationKey(props.videoLength), {\n          hourCount: hours,\n          minuteCount: minutes,\n          secondCount: seconds,\n        }),\n      },\n    );\n  }\n\n  return i18n.translate(\n    'Polaris.VideoThumbnail.playButtonA11yLabel.default',\n  );\n});\n\nconst progressValue = computed(() => {\n  // if (props.videoProgress > props.videoLength && process.env.NODE_ENV === 'development') {\n  //   console.warn(\n  //     'Value passed to the video progress should not exceed video length. Resetting progress to 100%.',\n  //   );\n  // }\n\n  if (props.videoProgress > 0 && props.videoLength > 0) {\n    const progress = parseFloat((props.videoProgress / props.videoLength).toFixed(2));\n    return progress > 1 ? 1 : progress;\n  }\n\n  return 0;\n});\n\nconst progressValuePercents = computed(() => Math.round(progressValue.value * 100));\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA,UAAM,QAAQ;AAMd,UAAM,QAAQ;AAEd,UAAM,OAAO;AAEP,UAAA,aAAa,OAAmC,eAAe,MAAS;AAE9E,UAAM,wBAAwB,SAAS,OAAM,yCAAY,0BAAyB,KAAK;AAEjF,UAAA,cAAc,SAAS,MAAM;AACjC,UAAI,MAAM,oBAAoB;AAC5B,eAAO,MAAM;AAAA,MAAA,WACJ,MAAM,aAAa;AAC5B,cAAM,EAAE,OAAO,SAAS,QAAY,IAAA,wBAAwB,MAAM,WAAW;AAE7E,eAAO,KAAK;AAAA,UACV;AAAA,UACA;AAAA,YACE,UAAU,KAAK,UAAU,gCAAgC,MAAM,WAAW,GAAG;AAAA,cAC3E,WAAW;AAAA,cACX,aAAa;AAAA,cACb,aAAa;AAAA,YAAA,CACd;AAAA,UACH;AAAA,QAAA;AAAA,MAEJ;AAEA,aAAO,KAAK;AAAA,QACV;AAAA,MAAA;AAAA,IACF,CACD;AAEK,UAAA,gBAAgB,SAAS,MAAM;AAOnC,UAAI,MAAM,gBAAgB,KAAK,MAAM,cAAc,GAAG;AAC9C,cAAA,WAAW,YAAY,MAAM,gBAAgB,MAAM,aAAa,QAAQ,CAAC,CAAC;AACzE,eAAA,WAAW,IAAI,IAAI;AAAA,MAC5B;AAEO,aAAA;AAAA,IAAA,CACR;AAEK,UAAA,wBAAwB,SAAS,MAAM,KAAK,MAAM,cAAc,QAAQ,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}