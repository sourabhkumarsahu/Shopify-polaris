{"version":3,"file":"DatePicker.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../src/components/DatePicker/DatePicker.vue"],"sourcesContent":["<template lang=\"pug\">\ndiv(\n  :id=\"id\",\n  :class=\"datePickerClassName\",\n  @keydown=\"handleKeyDown\",\n  @keyup=\"handleKeyUp\",\n)\n  div(:class=\"styles.Header\")\n    Button(\n      variant=\"tertiary\",\n      :icon=\"ArrowLeftIcon\",\n      :accessibility-label=\"i18n.translate('Polaris.DatePicker.previousMonth', { previousMonthName, showPreviousYear })\",\n      @click=\"() => handleMonthChangeClick(showPreviousMonth, showPreviousYear)\",\n    )\n    Button(\n      variant=\"tertiary\",\n      :icon=\"ArrowRightIcon\",\n      :accessibility-label=\"i18n.translate('Polaris.DatePicker.nextMonth', { nextMonth, nextYear })\",\n      @click=\"() => handleMonthChangeClick(showNextMonth, showNextYear)\",\n    )\n  div(:class=\"styles.MonthLayout\")\n    Month(\n      :focused-date=\"focusDate\",\n      :month=\"month\",\n      :year=\"year\",\n      :selected=\"deriveRange(model)\",\n      :hover-date=\"hoverDate\",\n      :disable-dates-before=\"disableDatesBefore\",\n      :disable-dates-after=\"disableDatesAfter\",\n      :disable-specific-dates=\"disableSpecificDates\",\n      :allow-range=\"allowRange\",\n      :week-starts-on=\"weekStartsOn\",\n      :accessibility-label-prefixes=\"accessibilityLabelPrefixes\",\n      @change=\"handleDateSelection\",\n      @hover=\"handleHover\",\n      @focus=\"handleFocus\",\n    )\n    Month(\n      v-if=\"multiMonth\",\n      :focused-date=\"focusDate\",\n      :month=\"showNextMonth\",\n      :year=\"showNextYear\",\n      :selected=\"deriveRange(model)\",\n      :hover-date=\"hoverDate\",\n      :disable-dates-before=\"disableDatesBefore\",\n      :disable-dates-after=\"disableDatesAfter\",\n      :disable-specific-dates=\"disableSpecificDates\",\n      :allow-range=\"allowRange\",\n      :week-starts-on=\"weekStartsOn\",\n      :accessibility-label-prefixes=\"accessibilityLabelPrefixes\",\n      @change=\"handleDateSelection\",\n      @hover=\"handleHover\",\n      @focus=\"handleFocus\",\n    )\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue';\nimport { classNames } from '@/utilities/css';\nimport {\n  isDateAfter,\n  isDateBefore,\n  getNextDisplayYear,\n  getNextDisplayMonth,\n  getPreviousDisplayYear,\n  getPreviousDisplayMonth,\n  isDateDisabled,\n  type Range,\n} from '@polaris/utilities/dates';\nimport useI18n from '@/use/useI18n';\nimport { Button } from '@/components';\nimport { monthName } from '@polaris/components/DatePicker/utilities';\nimport { Month } from './components';\nimport styles from '@polaris/components/DatePicker/DatePicker.module.css';\nimport ArrowLeftIcon from '@icons/ArrowLeftIcon.svg';\nimport ArrowRightIcon from '@icons/ArrowRightIcon.svg';\n\nexport type DatePickerProps = {\n  /** ID for the element */\n  id?: string;\n  /** The month to show, from 0 to 11. 0 is January, 1 is February ... 11 is December */\n  month: number;\n  /** The year to show */\n  year: number;\n  /** Allow a range of dates to be selected */\n  allowRange?: boolean;\n  /** Disable selecting dates before this. */\n  disableDatesBefore?: Date;\n  /** Disable selecting dates after this. */\n  disableDatesAfter?: Date;\n  /** Disable specific dates. */\n  disableSpecificDates?: Date[];\n  /** The selection can span multiple months */\n  multiMonth?: boolean;\n  /**\n   * First day of week, from 0 to 6. 0 is Sunday, 1 is Monday ... 6 is Saturday\n   * @default 0\n   */\n  weekStartsOn?: number;\n  /** Visually hidden prefix text for selected days on single selection date pickers */\n  dayAccessibilityLabelPrefix?: string;\n}\n\ntype DatePickerEvents = {\n  /** Callback when date is selected. */\n  'change': [date: Range];\n  /** Callback when month is changed. */\n  'month-change': [month: number, year: number];\n}\n\nconst props = withDefaults(defineProps<DatePickerProps>(), {\n  weekStartsOn: 0,\n});\nconst emits = defineEmits<DatePickerEvents>();\n\nconst i18n = useI18n();\n\nconst model = defineModel<Range | Date>();\n\nconst hoverDate = ref<Date>();\nconst focusDate = ref<Date>();\n\nconst showNextYear = computed(() => getNextDisplayYear(props.month, props.year));\nconst showNextMonth = computed(() => getNextDisplayMonth(props.month));\n\nconst showNextToNextYear = computed(() => getNextDisplayYear(showNextMonth.value, showNextYear.value));\nconst showNextToNextMonth = computed(() => getNextDisplayMonth(showNextMonth.value));\n\nconst showPreviousYear = computed(() => getPreviousDisplayYear(props.month, props.year));\nconst showPreviousMonth = computed(() => getPreviousDisplayMonth(props.month));\n\nconst previousMonthName = computed(() => i18n.translate(\n  `Polaris.DatePicker.months.${monthName(showPreviousMonth.value)}`,\n));\n\nconst nextMonth = computed(() => {\n  if (props.multiMonth) {\n    return i18n.translate(\n      `Polaris.DatePicker.months.${monthName(showNextToNextMonth.value)}`,\n    );\n  }\n\n  return i18n.translate(\n    `Polaris.DatePicker.months.${monthName(showNextMonth.value)}`,\n  );\n});\n\nconst nextYear = computed(() => {\n  if (props.multiMonth) {\n    return showNextToNextYear.value;\n  }\n\n  return showNextYear.value;\n});\n\nconst firstDatePickerAccessibilityLabelPrefix = computed(() => {\n  if (props.allowRange) {\n    return i18n.translate('Polaris.DatePicker.startDate');\n  }\n\n  return props.dayAccessibilityLabelPrefix;\n});\nconst secondDatePickerAccessibilityLabelPrefix = i18n.translate('Polaris.DatePicker.end');\n\nconst accessibilityLabelPrefixes = computed<[string | undefined, string]>(() => [\n  firstDatePickerAccessibilityLabelPrefix.value,\n  secondDatePickerAccessibilityLabelPrefix,\n]);\n\nconst datePickerClassName = classNames(styles.DatePicker);\n\nconst handleFocus = (date: Date) => {\n  focusDate.value = date;\n};\n\nconst setFocusDateAndHandleMonthChange = (date: Date) => {\n  emits('month-change', date.getMonth(), date.getFullYear());\n\n  hoverDate.value = date;\n  focusDate.value = date;\n};\n\nconst handleDateSelection = (range: Range) => {\n  hoverDate.value = range.end;\n  focusDate.value = new Date(range.end);\n\n  model.value = range;\n  emits('change', range);\n};\n\nconst handleMonthChangeClick = (month: number, year: number) => {\n  focusDate.value = undefined;\n  emits('month-change', month, year);\n};\n\nconst handleHover = (date: Date | null) => {\n  hoverDate.value = date || undefined;\n};\n\nconst handleKeyUp = (event: KeyboardEvent) => {\n  const { key } = event;\n\n  const range = deriveRange(model.value);\n  const focusedDate = focusDate.value || (range && range.start);\n\n  if (!focusedDate) {\n    return;\n  }\n\n  if (key === 'ArrowUp') {\n    const previousWeek = new Date(focusedDate);\n    previousWeek.setDate(focusedDate.getDate() - 7);\n\n    if (\n      !(\n        (props.disableDatesBefore && isDateBefore(previousWeek, props.disableDatesBefore))\n        || (props.disableSpecificDates && isDateDisabled(previousWeek, props.disableSpecificDates))\n      )\n    ) {\n      setFocusDateAndHandleMonthChange(previousWeek);\n    }\n  }\n\n  if (key === 'ArrowDown') {\n    const nextWeek = new Date(focusedDate);\n    nextWeek.setDate(focusedDate.getDate() + 7);\n\n    if (\n      !(\n        (props.disableDatesAfter && isDateAfter(nextWeek, props.disableDatesAfter))\n        || (props.disableSpecificDates && isDateDisabled(nextWeek, props.disableSpecificDates))\n      )\n    ) {\n      setFocusDateAndHandleMonthChange(nextWeek);\n    }\n  }\n\n  if (key === 'ArrowRight') {\n    const nextDay = new Date(focusedDate);\n    nextDay.setDate(focusedDate.getDate() + 1);\n\n    if (\n      !(\n        (props.disableDatesAfter && isDateAfter(nextDay, props.disableDatesAfter))\n        || (props.disableSpecificDates && isDateDisabled(nextDay, props.disableSpecificDates))\n      )\n    ) {\n      setFocusDateAndHandleMonthChange(nextDay);\n    }\n  }\n\n  if (key === 'ArrowLeft') {\n    const previousDay = new Date(focusedDate);\n    previousDay.setDate(focusedDate.getDate() - 1);\n\n    if (\n      !(\n        (props.disableDatesBefore && isDateBefore(previousDay, props.disableDatesBefore))\n        || (props.disableSpecificDates && isDateDisabled(previousDay, props.disableSpecificDates))\n      )\n    ) {\n      setFocusDateAndHandleMonthChange(previousDay);\n    }\n  }\n};\n\nconst handleKeyDown = (event: KeyboardEvent) => {\n  const { key } = event;\n\n  if (key === 'ArrowUp' || key === 'ArrowDown' || key === 'ArrowRight' || key === 'ArrowLeft') {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\nfunction deriveRange(selected?: Date | Range) {\n  return selected instanceof Date ? {start: selected, end: selected} : selected;\n}\n</script>\n"],"names":["_useModel"],"mappings":"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"}