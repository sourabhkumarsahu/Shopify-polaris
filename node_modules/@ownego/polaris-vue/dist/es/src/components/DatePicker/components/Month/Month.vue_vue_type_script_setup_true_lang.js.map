{"version":3,"file":"Month.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../../../src/components/DatePicker/components/Month/Month.vue"],"sourcesContent":["<template lang=\"pug\">\ndiv(:class=\"styles.MonthContainer\")\n  table(role=\"grid\", :class=\"styles.Month\")\n    caption(:class=\"styles.Title\")\n      Text(\n        as=\"span\",\n        variant=\"bodyMd\",\n        alignment=\"center\",\n        :font-weight=\"current ? 'bold' : 'medium'\",\n      ) {{ i18n.translate(`Polaris.DatePicker.months.${monthName(month)}`) }} {{ year }}\n\n    thead\n      tr(:class=\"styles.WeekHeadings\")\n        Weekday(\n          v-for=\"weekday in weekdaysOrdered\",\n          :key=\"weekday\",\n          :title=\"i18n.translate(`Polaris.DatePicker.daysAbbreviated.${weekdayName(weekday)}`)\",\n          :label=\"weekdayLabel(weekday)\",\n          :current=\"current && new Date().getDay() === weekday\",\n        )\n\n    tbody\n      tr(\n        v-for=\"week, index in weeks\",\n        :key=\"index\",\n        :class=\"styles.Week\",\n      )\n        template(\n          v-for=\"day, dayIndex in week\",\n          :key=\"dayIndex\",\n        )\n          Day(\n            v-if=\"!day\",\n            :last-day-of-month=\"lastDayOfMonth\",\n            @hover=\"emits('hover', null)\",\n          )\n          Day(\n            v-else,\n            :selected-accessibility-label-prefix=\"accessibilityLabelPrefix(day)\",\n            :weekday=\"weekdayLabel(dayIndex)\",\n            :focused=\"focusedDate && isSameDay(day, focusedDate)\",\n            :day=\"day\",\n            :selected=\"selected && dateIsSelected(day, selected)\",\n            :in-range=\"selected && dateIsInRange(day, selected)\",\n            :disabled=\"isDayDisabled(day)\",\n            :in-hovering-range=\"selected && hoverDate && isInHoveringRange(day, selected, hoverDate)\",\n            :is-last-selected-day=\"isLastSelectedDay(day)\",\n            :is-first-selected-day=\"isFirstSelectedDay(day)\",\n            :is-hovering-right=\"isHoveringRight(day)\",\n            :range-is-different=\"rangeIsDifferent\",\n            @focus=\"emits('focus', day)\",\n            @click=\"handleDateClick(day)\",\n            @hover=\"emits('hover', day)\",\n          )\n\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport {\n  isDateBefore,\n  isDateAfter,\n  isSameDay,\n  getWeeksForMonth,\n  dateIsInRange,\n  dateIsSelected,\n  getNewRange,\n  getOrderedWeekdays,\n  isDateDisabled,\n  type Range,\n} from '@polaris/utilities/dates';\nimport useI18n from '@/use/useI18n';\nimport { Text } from '@/components';\nimport { Day } from '../Day';\nimport { Weekday } from '../Weekday';\nimport { monthName, weekdayName } from '@polaris/components/DatePicker/utilities';\nimport styles from '@polaris/components/DatePicker/DatePicker.module.css';\n\nexport type MonthProps = {\n  focusedDate?: Date;\n  selected?: Range;\n  hoverDate?: Date;\n  month: number;\n  year: number;\n  disableDatesBefore?: Date;\n  disableDatesAfter?: Date;\n  disableSpecificDates?: Date[];\n  allowRange?: boolean;\n  weekStartsOn: number;\n  accessibilityLabelPrefixes: [string | undefined, string];\n}\n\ntype MonthEvents = {\n  'change': [date: Range];\n  'hover': [hoverEnd: Date | null];\n  'focus': [date: Date];\n}\n\nconst props = defineProps<MonthProps>();\nconst emits = defineEmits<MonthEvents>();\n\nconst i18n = useI18n();\n\nconst isInHoveringRange = props.allowRange ? hoveringDateIsInRange : () => false;\nconst now = new Date();\nconst current = computed(() => (now.getMonth() === props.month && now.getFullYear() === props.year));\nconst weeks = computed(() => getWeeksForMonth(props.month, props.year, props.weekStartsOn));\n\nconst lastDayOfMonth = computed(() => {\n  return new Date(props.year, (props.month as number) + 1, 0);\n});\n\nconst rangeIsDifferent = computed(() => !(props.selected && isSameDay(props.selected.start, props.selected.end)));\n\nconst weekdaysOrdered = computed(() => {\n  return getOrderedWeekdays(props.weekStartsOn);\n});\n\nconst isDayDisabled = (day: Date) => {\n  return (props.disableDatesBefore && isDateBefore(day, props.disableDatesBefore)) ||\n    (props.disableDatesAfter && isDateAfter(day, props.disableDatesAfter)) ||\n    (props.disableSpecificDates && isDateDisabled(day, props.disableSpecificDates));\n};\n\nconst isFirstSelectedDay = (day: Date) => {\n  return props.allowRange && props.selected && isDateStart(day, props.selected);\n};\n\nconst isLastSelectedDay = (day: Date) => {\n  return props.allowRange && props.selected\n    && (\n      (!isSameDay(props.selected.start, props.selected.end) && isDateEnd(day, props.selected))\n      || (props.hoverDate\n        && isSameDay(props.selected.start, props.selected.end)\n        && isDateAfter(props.hoverDate, props.selected.start)\n        && isSameDay(day, props.hoverDate)\n        && !isFirstSelectedDay(day)\n      )\n    );\n};\n\nconst isHoveringRight = (day: Date) => {\n  return props.hoverDate && isDateBefore(day, props.hoverDate);\n};\n\nconst accessibilityLabelPrefix = (day: Date) => {\n  const [ firstAccessibilityLabelPrefix, lastAccessibilityLabelPrefix ] = props.accessibilityLabelPrefixes;\n\n  if (\n    (props.allowRange && isFirstSelectedDay(day))\n    || (!props.allowRange && firstAccessibilityLabelPrefix)\n  ) {\n    return firstAccessibilityLabelPrefix;\n  }\n\n  if (props.allowRange && isLastSelectedDay(day)) {\n    return lastAccessibilityLabelPrefix;\n  }\n};\n\nconst handleDateClick = (selectedDate: Date) => {\n  const selectedValue = getNewRange(props.allowRange ? props.selected : undefined, selectedDate);\n  emits('change', selectedValue);\n};\n\nconst weekdayLabel = (weekday: number) => {\n  return i18n.translate(`Polaris.DatePicker.days.${weekdayName(weekday)}`);\n}\n\nfunction hoveringDateIsInRange(\n  day: Date | null,\n  range: Range,\n  hoverEndDate: Date,\n) {\n  if (day == null) {\n    return false;\n  }\n  const {start, end} = range;\n  return Boolean(isSameDay(start, end) && day > start && day <= hoverEndDate);\n}\n\nfunction isDateEnd(day: Date | null, range: Range) {\n  if (day == null) return false;\n  const {end} = range;\n\n  return Boolean(end && isSameDay(end, day));\n}\n\nfunction isDateStart(day: Date | null, range: Range) {\n  if (day == null) return false;\n  const {start} = range;\n\n  return Boolean(start && isSameDay(start, day));\n}\n</script>\n"],"names":[],"mappings":"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"}