{"version":3,"file":"Option.vue_vue_type_script_setup_true_lang.js","sources":["../../../../../../../src/components/Listbox/components/Option/Option.vue"],"sourcesContent":["<template lang=\"pug\">\nli(\n  v-bind=\"sectionAttributes\",\n  tabindex=\"-1\",\n  data-listbox-option,\n  ref=\"listItemRef\",\n  :id=\"domId\",\n  :class=\"className\",\n  :role=\"legacyRoleSupport\",\n  :data-within-section=\"isWithinSection\",\n  :data-listbox-option-value=\"value\",\n  :data-listbox-option-action=\"isAction\",\n  :data-listbox-option-destructive=\"destructive\",\n  :aria-disabled=\"disabled\",\n  :aria-label=\"accessibilityLabel\",\n  :aria-selected=\"selected\",\n  @click=\"handleOptionSelect\",\n  @keydown=\"handleOptionSelect\",\n  @mousedown=\"handleMouseDown\",\n)\n  UnstyledLink(\n    v-if=\"url\",\n    :url=\"url\",\n    :external=\"external\",\n  )\n    slot(v-if=\"isSlotContainHtmlTags\")\n    TextOption(\n      v-else,\n      v-model=\"model\",\n      :disabled=\"disabled\",\n    )\n      slot\n  template(v-else)\n    slot(v-if=\"isSlotContainHtmlTags\")\n    TextOption(\n      v-else,\n      v-model=\"model\",\n      :disabled=\"disabled\",\n    )\n      slot\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, ref, computed, type VNode, onMounted, watch, type ComputedRef } from 'vue';\nimport { classNames } from '@/utilities/css';\nimport useId from '@/use/useId';\nimport { listboxWithinSectionDataSelector } from '@polaris/components/Listbox/components/Section/selectors';\nimport TextOption from '../TextOption/TextOption.vue';\nimport { UnstyledLink } from '@/components';\nimport styles from '@polaris/components/Listbox/components/Option/Option.module.css';\nimport { useAction, useListbox, useSection } from '@/use/useListbox';\nimport { useHasSlot } from '@/use/useHasSlot';\nimport type { VueNode } from '@/utilities/types';\nimport type { MappedActionContextType } from '@/utilities/auto-complete';\n\ninterface OptionProps {\n  // Unique item value\n  value: string;\n  // Visually hidden text for screen readers\n  accessibilityLabel?: string;\n  // Option is selected\n  selected?: boolean;\n  // Option is disabled\n  disabled?: boolean;\n  // Adds a border-bottom to the Option\n  divider?: boolean;\n}\n\nconst props = defineProps<OptionProps>();\nconst slots = defineSlots<{\n  // Children. When a string, children are rendered in a styled TextOption\n  default?: (_?: VueNode) => VNode[];\n}>();\n\nconst model = defineModel<boolean>();\n\nonMounted(() => {\n  model.value = props.selected;\n});\n\nwatch(\n  () => props.selected,\n  (newVal) => {\n    model.value = newVal;\n  }, { immediate: true },\n);\n\n//- Inject\nconst mappedActionContext = inject<ComputedRef<MappedActionContextType>>('mapped-action', computed(() => ({})));\nconst sectionId = useSection();\nconst listboxContext = useListbox();\n\nconst { isSlotContainHtml } = useHasSlot();\nconst isAction = useAction();\n\nconst { role, url, external, onAction, destructive } = mappedActionContext.value;\nconst { onOptionSelect } = listboxContext;\n\nconst listItemRef = ref<HTMLElement | null>(null);\nconst domId = String(useId());\n\nconst isWithinSection = computed(() => Boolean(sectionId));\nconst legacyRoleSupport = computed(() => role || 'option');\nconst className = computed(() => classNames(\n  styles.Option,\n  props.divider && styles.divider,\n));\n\nconst sectionAttributes = computed(() => ({\n  [listboxWithinSectionDataSelector.attribute]: isWithinSection.value,\n}));\n\nconst isSlotContainHtmlTags = computed(() => {\n  return isSlotContainHtml(slots.default);\n});\n\nconst handleOptionSelect = (event: MouseEvent | KeyboardEvent) => {\n  if (props.disabled) return;\n\n  event.preventDefault();\n  event.stopPropagation();\n\n  model.value = !model.value;\n  onAction && onAction();\n  if (listItemRef.value && !onAction) {\n    onOptionSelect({\n      domId,\n      value: props.value,\n      element: listItemRef.value,\n      disabled: props.disabled,\n    });\n  }\n};\n\nconst handleMouseDown = (event: MouseEvent): void => {\n  event.preventDefault();\n};\n</script>\n"],"names":["_useSlots","_useModel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA,UAAM,QAAQ;AACd,UAAM,QAAQA;AAKR,UAAA,QAAQC,SAAqB,SAAA,YAAA;AAEnC,cAAU,MAAM;AACd,YAAM,QAAQ,MAAM;AAAA,IAAA,CACrB;AAED;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,WAAW;AACV,cAAM,QAAQ;AAAA,MAChB;AAAA,MAAG,EAAE,WAAW,KAAK;AAAA,IAAA;AAIvB,UAAM,sBAAsB,OAA6C,iBAAiB,SAAS,OAAO,CAAA,EAAG,CAAC;AAC9G,UAAM,YAAY;AAClB,UAAM,iBAAiB;AAEjB,UAAA,EAAE,sBAAsB;AAC9B,UAAM,WAAW;AAEjB,UAAM,EAAE,MAAM,KAAK,UAAU,UAAU,gBAAgB,oBAAoB;AACrE,UAAA,EAAE,eAAmB,IAAA;AAErB,UAAA,cAAc,IAAwB,IAAI;AAC1C,UAAA,QAAQ,OAAO,MAAA,CAAO;AAE5B,UAAM,kBAAkB,SAAS,MAAM,QAAQ,SAAS,CAAC;AACzD,UAAM,oBAAoB,SAAS,MAAM,QAAQ,QAAQ;AACnD,UAAA,YAAY,SAAS,MAAM;AAAA,MAC/B,OAAO;AAAA,MACP,MAAM,WAAW,OAAO;AAAA,IAAA,CACzB;AAEK,UAAA,oBAAoB,SAAS,OAAO;AAAA,MACxC,CAAC,iCAAiC,SAAS,GAAG,gBAAgB;AAAA,IAC9D,EAAA;AAEI,UAAA,wBAAwB,SAAS,MAAM;AACpC,aAAA,kBAAkB,MAAM,OAAO;AAAA,IAAA,CACvC;AAEK,UAAA,qBAAqB,CAAC,UAAsC;AAChE,UAAI,MAAM,SAAU;AAEpB,YAAM,eAAe;AACrB,YAAM,gBAAgB;AAEhB,YAAA,QAAQ,CAAC,MAAM;AACrB,kBAAY,SAAS;AACjB,UAAA,YAAY,SAAS,CAAC,UAAU;AACnB,uBAAA;AAAA,UACb;AAAA,UACA,OAAO,MAAM;AAAA,UACb,SAAS,YAAY;AAAA,UACrB,UAAU,MAAM;AAAA,QAAA,CACjB;AAAA,MACH;AAAA,IAAA;AAGI,UAAA,kBAAkB,CAAC,UAA4B;AACnD,YAAM,eAAe;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}