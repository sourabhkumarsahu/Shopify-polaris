{"version":3,"file":"utils.js","sources":["../../../../../src/components/BulkActions/utils.ts"],"sourcesContent":["import type { BulkAction, BulkActionListSection, BulkActionsProps } from './types';\nimport type { MenuGroupDescriptor } from '@/utilities/types';\n\nexport function getVisibleAndHiddenActionsIndices(\n  promotedActions: any[] = [],\n  disclosureWidth: number,\n  actionsWidths: number[],\n  containerWidth: number,\n) {\n  const sumTabWidths = actionsWidths.reduce((sum, width) => sum + width, 0);\n  const arrayOfPromotedActionsIndices = promotedActions.map((_, index) => {\n    return index;\n  });\n\n  const visiblePromotedActions: number[] = [];\n  const hiddenPromotedActions: number[] = [];\n\n  if (containerWidth > sumTabWidths) {\n    visiblePromotedActions.push(...arrayOfPromotedActionsIndices);\n  } else {\n    let accumulatedWidth = 0;\n    let hasReturned = false;\n\n    arrayOfPromotedActionsIndices.forEach((currentPromotedActionsIndex) => {\n      const currentActionsWidth = actionsWidths[currentPromotedActionsIndex];\n      const notEnoughSpace =\n        accumulatedWidth + currentActionsWidth >=\n        containerWidth - disclosureWidth;\n\n      if (notEnoughSpace || hasReturned) {\n        hiddenPromotedActions.push(currentPromotedActionsIndex);\n        hasReturned = true;\n        return;\n      }\n\n      visiblePromotedActions.push(currentPromotedActionsIndex);\n      accumulatedWidth += currentActionsWidth;\n    });\n  }\n\n  return {\n    visiblePromotedActions,\n    hiddenPromotedActions,\n  };\n}\n\nexport function instanceOfBulkActionListSectionArray(\n  actions: (BulkAction | BulkActionListSection)[],\n): actions is BulkActionListSection[] {\n  const validList = actions.filter((action: any) => {\n    return action.items;\n  });\n\n  return actions.length === validList.length;\n}\n\nexport function instanceOfBulkActionArray(\n  actions: (BulkAction | BulkActionListSection)[],\n): actions is BulkAction[] {\n  const validList = actions.filter((action: any) => {\n    return !action.items;\n  });\n\n  return actions.length === validList.length;\n}\n\nexport function instanceOfMenuGroupDescriptor(\n  action: MenuGroupDescriptor | BulkAction,\n): action is MenuGroupDescriptor {\n  return 'title' in action && 'actions' in action;\n}\n\nexport function instanceOfBulkActionListSection(\n  action: BulkAction | BulkActionListSection,\n): action is BulkActionListSection {\n  return 'items' in action;\n}\n\nexport function getActionSections(\n  actions: BulkActionsProps['actions'],\n): BulkActionListSection[] | undefined {\n  if (!actions || actions.length === 0) {\n    return;\n  }\n\n  if (instanceOfBulkActionListSectionArray(actions)) {\n    return actions;\n  }\n\n  if (instanceOfBulkActionArray(actions)) {\n    return [\n      {\n        items: actions,\n      },\n    ];\n  }\n}\n\nexport function isNewBadgeInBadgeActions(\n  actionSections?: BulkActionListSection[],\n) {\n  if (!actionSections) return false;\n\n  for (const action of actionSections) {\n    for (const item of action.items) {\n      if (item.badge?.tone === 'new') return true;\n    }\n  }\n\n  return false;\n}\n"],"names":[],"mappings":"AAGO,SAAS,kCACd,kBAAyB,CAAA,GACzB,iBACA,eACA,gBACA;AACM,QAAA,eAAe,cAAc,OAAO,CAAC,KAAK,UAAU,MAAM,OAAO,CAAC;AACxE,QAAM,gCAAgC,gBAAgB,IAAI,CAAC,GAAG,UAAU;AAC/D,WAAA;AAAA,EAAA,CACR;AAED,QAAM,yBAAmC,CAAA;AACzC,QAAM,wBAAkC,CAAA;AAExC,MAAI,iBAAiB,cAAc;AACV,2BAAA,KAAK,GAAG,6BAA6B;AAAA,EAAA,OACvD;AACL,QAAI,mBAAmB;AACvB,QAAI,cAAc;AAEY,kCAAA,QAAQ,CAAC,gCAAgC;AAC/D,YAAA,sBAAsB,cAAc,2BAA2B;AAC/D,YAAA,iBACJ,mBAAmB,uBACnB,iBAAiB;AAEnB,UAAI,kBAAkB,aAAa;AACjC,8BAAsB,KAAK,2BAA2B;AACxC,sBAAA;AACd;AAAA,MACF;AAEA,6BAAuB,KAAK,2BAA2B;AACnC,0BAAA;AAAA,IAAA,CACrB;AAAA,EACH;AAEO,SAAA;AAAA,IACL;AAAA,IACA;AAAA,EAAA;AAEJ;AAEO,SAAS,qCACd,SACoC;AACpC,QAAM,YAAY,QAAQ,OAAO,CAAC,WAAgB;AAChD,WAAO,OAAO;AAAA,EAAA,CACf;AAEM,SAAA,QAAQ,WAAW,UAAU;AACtC;AAEO,SAAS,0BACd,SACyB;AACzB,QAAM,YAAY,QAAQ,OAAO,CAAC,WAAgB;AAChD,WAAO,CAAC,OAAO;AAAA,EAAA,CAChB;AAEM,SAAA,QAAQ,WAAW,UAAU;AACtC;AAEO,SAAS,8BACd,QAC+B;AACxB,SAAA,WAAW,UAAU,aAAa;AAC3C;AAEO,SAAS,gCACd,QACiC;AACjC,SAAO,WAAW;AACpB;AAEO,SAAS,kBACd,SACqC;AACrC,MAAI,CAAC,WAAW,QAAQ,WAAW,GAAG;AACpC;AAAA,EACF;AAEI,MAAA,qCAAqC,OAAO,GAAG;AAC1C,WAAA;AAAA,EACT;AAEI,MAAA,0BAA0B,OAAO,GAAG;AAC/B,WAAA;AAAA,MACL;AAAA,QACE,OAAO;AAAA,MACT;AAAA,IAAA;AAAA,EAEJ;AACF;AAEO,SAAS,yBACd,gBACA;AAjGK;AAkGD,MAAA,CAAC,eAAuB,QAAA;AAE5B,aAAW,UAAU,gBAAgB;AACxB,eAAA,QAAQ,OAAO,OAAO;AAC/B,YAAI,UAAK,UAAL,mBAAY,UAAS,MAAc,QAAA;AAAA,IACzC;AAAA,EACF;AAEO,SAAA;AACT;"}